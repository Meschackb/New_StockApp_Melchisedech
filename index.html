<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockTrack - Gestion de Stock</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Icônes Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        
        <!-- ======================= -->
        <!-- EN-TÊTE ET NAVIGATION -->
        <!-- ======================= -->
        <header>
            <h1 class="app-title"><i class="fas fa-warehouse"></i> StockTrack</h1>
            <nav>
                <button id="show-list-btn" onclick="showView('list')" class="btn nav-btn"><i class="fas fa-box"></i> Stock</button>
                <button id="show-add-btn" class="btn btn-primary nav-btn"><i class="fas fa-plus-circle"></i> Ajouter Produit</button>
                <button id="show-sell-btn" class="btn btn-success nav-btn"><i class="fas fa-cash-register"></i> Enregistrer Vente</button>
                <button id="show-report-btn" class="btn btn-info nav-btn"><i class="fas fa-chart-line"></i> Rapport Ventes</button>
                <button id="show-purchase-report-btn" class="btn btn-secondary nav-btn"><i class="fas fa-file-invoice-dollar"></i> Rapport Achats</button>
                <button id="show-about-btn" class="btn nav-btn"><i class="fas fa-info-circle"></i> À Propos</button>
            </nav>
        </header>
        
        <div id="alert-container">
            <!-- Les notifications de stock faible ou les erreurs iront ici -->
        </div>

        <!-- ======================= -->
        <!-- VUE 1: LISTE DES PRODUITS -->
        <!-- ======================= -->
        <section id="product-list-view" class="view">
            <h2>Inventaire Actuel</h2>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Quantité</th>
                            <th>Prix Achat (Unitaire)</th>
                            <th>Seuil Min.</th>
                            <th>Emplacement</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="product-tbody">
                        <!-- Les produits seront insérés ici par script.js -->
                    </tbody>
                </table>
            </div>
            <p id="empty-stock-message" class="empty-message" style="display:none;">
                <i class="fas fa-boxes"></i> Le stock est vide. Ajoutez votre premier produit !
            </p>
        </section>

        <!-- ======================= -->
        <!-- VUE 2: FORMULAIRE PRODUIT (AJOUT/MODIFICATION) -->
        <!-- ======================= -->
        <section id="product-form-view" class="view" style="display:none;">
            <h2 id="form-title">Ajouter un Nouveau Produit</h2>
            <form id="product-form" class="app-form">
                <input type="hidden" id="product-id">

                <div class="form-group">
                    <label for="name">Nom du Produit:</label>
                    <input type="text" id="name" required placeholder="Ex: T-shirt Coton Noir">
                </div>
                
                <div class="form-group">
                    <label for="quantity">Quantité en Stock:</label>
                    <input type="number" id="quantity" required min="0" placeholder="0">
                </div>

                <div class="form-group">
                    <label for="price">Prix d'Achat (Unitaire en €):</label>
                    <input type="number" id="price" required min="0" step="0.01" placeholder="0.00">
                </div>
                
                <div class="form-group">
                    <label for="minStockLevel">Seuil de Stock Minimum (Alerte):</label>
                    <input type="number" id="minStockLevel" required min="0" placeholder="5">
                </div>

                <div class="form-group">
                    <label for="location">Emplacement de Stockage (Facultatif):</label>
                    <input type="text" id="location" placeholder="Ex: Aisle 3, Étagère B">
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Enregistrer</button>
                    <button type="button" id="cancel-form-btn" class="btn btn-secondary"><i class="fas fa-times-circle"></i> Annuler</button>
                </div>
            </form>
        </section>

        <!-- ======================= -->
        <!-- VUE 3: FORMULAIRE DE VENTE -->
        <!-- ======================= -->
        <section id="sale-form-view" class="view" style="display:none;">
            <h2>Enregistrer une Vente</h2>
            <form id="sale-form" class="app-form">
                <div class="form-group">
                    <label for="sale-product-id">Produit Vendu:</label>
                    <select id="sale-product-id" required>
                        <option value="">-- Sélectionner un produit --</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="sale-quantity">Quantité Vendue:</label>
                    <input type="number" id="sale-quantity" required min="1" placeholder="1">
                </div>

                <div class="form-group">
                    <label for="sale-unit-price">Prix de Vente (Unitaire en €):</label>
                    <input type="number" id="sale-unit-price" required min="0.01" step="0.01" placeholder="19.99">
                </div>

                <div class="form-group">
                    <label for="sale-total-price">Prix Total de la Vente (€):</label>
                    <input type="text" id="sale-total-price" readonly disabled>
                </div>

                <div id="sale-error" class="error-message" style="display:none;"></div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-success"><i class="fas fa-check"></i> Finaliser la Vente</button>
                    <button type="button" id="cancel-sale-btn" class="btn btn-secondary"><i class="fas fa-times-circle"></i> Annuler</button>
                </div>
            </form>
        </section>

        <!-- ======================= -->
        <!-- VUE 4: RAPPORT DES VENTES -->
        <!-- ======================= -->
        <section id="sale-report-view" class="view" style="display:none;">
            <h2>Rapport Détaillé des Ventes</h2>
            <div class="report-actions">
                <button id="print-report-btn" class="btn btn-info"><i class="fas fa-print"></i> Imprimer le Rapport</button>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Date & Heure</th>
                            <th>Produit</th>
                            <th>Prix Unitaire Vente</th>
                            <th>Quantité Vendue</th>
                            <th>Revenu Total</th>
                        </tr>
                    </thead>
                    <tbody id="sale-report-tbody">
                        <!-- Les données de vente seront insérées ici -->
                    </tbody>
                    <tfoot id="sale-report-tfoot">
                        <!-- Le total du revenu ira ici -->
                    </tfoot>
                </table>
            </div>
            <p id="empty-sales-message" class="empty-message" style="display:none;">
                <i class="fas fa-shopping-cart"></i> Aucune vente n'a encore été enregistrée.
            </p>
        </section>
        
        <!-- ======================= -->
        <!-- VUE 5: RAPPORT DES ACHATS (NOUVEAU) -->
        <!-- ======================= -->
        <section id="purchase-report-view" class="view" style="display:none;">
            <h2>Rapport Détaillé des Achats (Stocks Entrants)</h2>
            <div class="report-actions">
                <button id="print-report-btn-purchase" class="btn btn-info"><i class="fas fa-print"></i> Imprimer le Rapport</button>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Date & Heure</th>
                            <th>Produit</th>
                            <th>Quantité Achetée</th>
                            <th>Prix Unitaire Achat</th>
                            <th>Dépense Totale</th>
                        </tr>
                    </thead>
                    <tbody id="purchase-report-tbody">
                        <!-- Les données d'achats seront insérées ici -->
                    </tbody>
                    <tfoot id="purchase-report-tfoot">
                        <!-- La dépense totale ira ici -->
                    </tfoot>
                </table>
            </div>
            <p id="empty-purchases-message" class="empty-message" style="display:none;">
                <i class="fas fa-truck-loading"></i> Aucun achat n'a encore été enregistré.
            </p>
        </section>

        <!-- ======================= -->
        <!-- VUE 6: À PROPOS -->
        <!-- ======================= -->
        <section id="about-view" class="view" style="display:none;">
            <h2>À Propos de StockTrack</h2>
            <div class="about-content">
                <p>StockTrack est une application simple et efficace pour la gestion des stocks de produits. Elle permet de suivre l'inventaire, d'enregistrer les ventes, et de générer des rapports pour mieux piloter votre activité.</p>
                <p>Fonctionnalités clés:</p>
                <ul>
                    <li>Suivi de l'inventaire avec alerte de stock faible.</li>
                    <li>Enregistrement des ventes et calcul du revenu.</li>
                    <li>Rapports détaillés des ventes et des achats (nouveau!).</li>
                    <li>Gestion de l'emplacement de stockage.</li>
                </ul>
                <p class="small-text">Développé pour l'amélioration continue des processus d'inventaire.</p>
                <button type="button" id="cancel-about-btn" class="btn btn-secondary mt-4"><i class="fas fa-arrow-left"></i> Retour au Stock</button>
            </div>
        </section>

    </div>

    <!-- Modale de Confirmation (Remplace window.confirm) -->
    <div id="main-modal" class="modal">
        <div class="modal-content">
            <p id="modal-message">Voulez-vous vraiment effectuer cette action ?</p>
            <div class="modal-actions">
                <button id="modal-confirm-btn" class="btn btn-danger">Confirmer</button>
                <button id="modal-cancel-btn" class="btn btn-secondary">Annuler</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
